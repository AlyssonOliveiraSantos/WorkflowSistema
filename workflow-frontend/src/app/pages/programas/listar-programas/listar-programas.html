<div class="table-container criar-fundo">
  <h2>Programas</h2>

  <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nome</th>
        <th>Área</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let programa of programas">
        <td>{{ programa.id }}</td>
        <td>{{ programa.nome }}</td>
        <td>{{ programa.areaNome }}</td>
        <td>
          <button class="btn-detalhes" (click)="abrirDetalhes(programa)">Detalhes</button>
          <button class="btn-editar" (click)="abrirEditar(programa)">Editar</button>
          <button class="btn-deletar" (click)="abrirModalDeletar(programa)">Deletar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<div class="modal" *ngIf="detalheSelecionado">
  <div class="modal-content">
    <span class="close" (click)="fecharDetalhes()">&times;</span>
    <h3>Detalhes do Programa</h3>
    <p><strong>ID:</strong> {{ detalheSelecionado.id }}</p>
    <p><strong>Nome:</strong> {{ detalheSelecionado.nome }}</p>
    <p><strong>Área:</strong> {{ detalheSelecionado.areaNome }}</p>
  </div>
</div>


<div class="modal" *ngIf="editarSelecionado">
  <div class="modal-content">
    <span class="close" (click)="fecharEditar()">&times;</span>
    <h3>Editar Programa</h3>

    <label>Nome</label>
    <input type="text" [(ngModel)]="editarSelecionado.nome">

    <label>Área</label>
    <div class="dropdown-wrapper" style="position: relative;">
      <input type="text"
             #inputArea
             [value]="getAreaNomeEditar()"
             (input)="buscarAreas($any($event.target).value)"
             (click)="showAreasDropdownEditar = true"
             placeholder="Pesquisar área">
      <ul *ngIf="showAreasDropdownEditar && areas.length" class="dropdown">
        <li *ngFor="let a of areas" (click)="selecionarAreaEditar(a)">
          {{ a.nome }}
        </li>
      </ul>
    </div>

   <div class="botoes-confirmar">
  <button class="btn-salvar" (click)="salvarEdicao()">Salvar</button>
  <button class="btn-cancelar" (click)="fecharEditar()">Cancelar</button>
</div>
  </div>
</div>


<div class="modal" *ngIf="confirmarExclusao">
  <div class="modal-content confirmar">
    <p>Deseja realmente deletar o programa <strong>{{ confirmarExclusao.nome }}</strong>?</p>
    <div class="botoes-confirmar">
      <button class="btn-cancelar" (click)="cancelarExclusao()">Cancelar</button>
      <button class="btn-deletar" (click)="confirmarDeletar()">Deletar</button>
    </div>
  </div>
</div>
